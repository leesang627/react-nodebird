{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{RNiq:function(e,t,n){\"use strict\";n.r(t);var c=n(\"ln6h\"),a=n.n(c),i=n(\"pLtp\"),l=n.n(i),r=n(\"q1tI\"),o=n.n(r),u=n(\"/MKj\"),s=n(\"Vl3Y\"),p=n(\"5rEg\"),d=n(\"2/Rp\"),f=n(\"p+NB\"),b=o.a.createElement,m=function(){var e=Object(u.b)(),t=Object(r.useState)(\"\"),n=t[0],c=t[1],a=Object(u.c)((function(e){return e.post})),i=a.imagePaths,l=a.isAddingPost,o=a.postAdded,m=Object(r.useRef)();Object(r.useEffect)((function(){o&&c(\"\")}),[o]);var h=Object(r.useCallback)((function(t){if(t.preventDefault(),!n||!n.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var c=new FormData;i.forEach((function(e){c.append(\"image\",e)})),c.append(\"content\",n),e({type:f.e,data:c})}),[n,i]),g=Object(r.useCallback)((function(e){c(e.target.value)}),[]),v=Object(r.useCallback)((function(t){console.log(t.target.files);var n=new FormData;[].forEach.call(t.target.files,(function(e){n.append(\"image\",e)})),e({type:f.J,data:n})}),[]),w=Object(r.useCallback)((function(){m.current.click()}),[m.current]),y=Object(r.useCallback)((function(t){return function(){e({type:f.y,index:t})}}),[]);return b(s.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onSubmit:h},b(p.a.TextArea,{maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc2e0\\uae30\\ud55c \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\",value:n,onChange:g}),b(\"div\",null,b(\"input\",{type:\"file\",multiple:!0,hidden:!0,ref:m,onChange:v}),b(d.a,{onClick:w},\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"),b(d.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:l},\"\\uc9f9\\uc9f9\")),b(\"div\",null,i.map((function(e,t){return b(\"div\",{key:e,style:{display:\"inline-block\"}},b(\"img\",{src:\"http://localhost:3065/\".concat(e),style:{width:\"200px\"},alt:e}),b(\"div\",null,b(d.a,{onClick:y(t)},\"\\uc81c\\uac70\")))}))))},h=n(\"uor+\"),g=o.a.createElement,v=function(){var e=Object(u.c)((function(e){return e.user})).me,t=Object(u.c)((function(e){return e.post})),n=t.mainPosts,c=t.hasMorePost,a=Object(u.b)(),i=Object(r.useRef)([]),l=Object(r.useCallback)((function(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&c){var e=n[n.length-1].id;i.current.includes(e)||(a({type:f.q,lastId:e}),i.current.push(e))}}),[c,n.length]);return Object(r.useEffect)((function(){return window.addEventListener(\"scroll\",l),function(){window.removeEventListener(\"scroll\",l)}}),[n.length]),g(\"div\",null,e&&g(m,null),n.map((function(e){return g(h.a,{key:e.id,post:e})})))};v.getInitialProps=function(e){return a.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(l()(e)),e.store.dispatch({type:f.q});case 2:case\"end\":return t.stop()}}))};t.default=v},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,6,0,3,4,5,7,8]]]);"}